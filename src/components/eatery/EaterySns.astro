---
import LinkSns from '@components/ui/LinkSns.astro';
import type { TEatery } from '@libs/types';

import InstagramLogo from '/logo/Instagram.svg';
import TwitterLogo from '/logo/Twitter.svg';

const snsLink = (item: TEatery, platform: 'Instagram' | 'Twitter') => {
	const platformLowerCase: 'instagram' | 'twitter' = platform.toLowerCase() as
		| 'instagram'
		| 'twitter';
	const platformUrl = item[`${platformLowerCase}Url`];
	const platformName = item[`${platformLowerCase}Name`];
	const platformLogo = () => {
		switch (platform) {
			case 'Instagram':
				return InstagramLogo;
			case 'Twitter':
				return TwitterLogo;
		}
	};
	return { platformUrl, platformName, platformLogo };
};

type Props = {
	item: TEatery;
};

const { item } = Astro.props;
---

{
	item.sns.map(platform => (
		<LinkSns
			text={
				snsLink(item, platform).platformName !== undefined
					? snsLink(item, platform).platformName
					: platform
			}
			link={
				snsLink(item, platform).platformUrl !== undefined
					? snsLink(item, platform).platformUrl
					: '/'
			}
			image={snsLink(item, platform).platformLogo()}
			imageAlt={platform}
		/>
	))
}
